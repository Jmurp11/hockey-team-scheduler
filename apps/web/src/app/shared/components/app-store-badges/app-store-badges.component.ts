import { CommonModule } from '@angular/common';
import { ChangeDetectionStrategy, Component, Input } from '@angular/core';

/**
 * Component displaying App Store and Google Play download badges.
 * Links to the RinkLink mobile app on respective app stores.
 *
 * @example
 * ```html
 * <app-app-store-badges />
 * <app-app-store-badges size="small" />
 * <app-app-store-badges [showLabel]="true" />
 * ```
 */
@Component({
  selector: 'app-app-store-badges',
  standalone: true,
  imports: [CommonModule],
  template: `
    <div class="app-store-badges" [class.app-store-badges--small]="size === 'small'">
      @if (showLabel) {
        <p class="app-store-badges__label">Get the mobile app</p>
      }
      <div class="app-store-badges__buttons">
        <!-- Apple App Store Badge -->
        <a
          [href]="appStoreUrl"
          target="_blank"
          rel="noopener noreferrer"
          class="app-store-badges__link"
          aria-label="Download RinkLink on the Apple App Store"
        >
          <svg
            class="app-store-badges__badge"
            viewBox="0 0 120 40"
            xmlns="http://www.w3.org/2000/svg"
            role="img"
            aria-hidden="true"
          >
            <title>Download on the App Store</title>
            <rect width="120" height="40" rx="6" fill="#000" />
            <g fill="#fff">
              <path
                d="M24.769 20.3a4.949 4.949 0 0 1 2.356-4.151 5.066 5.066 0 0 0-3.99-2.158c-1.68-.176-3.308 1.005-4.164 1.005-.872 0-2.19-.988-3.608-.958a5.315 5.315 0 0 0-4.473 2.728c-1.934 3.348-.491 8.269 1.361 10.976.927 1.325 2.01 2.805 3.428 2.753 1.387-.058 1.905-.885 3.58-.885 1.658 0 2.144.885 3.59.852 1.489-.025 2.426-1.332 3.32-2.67a10.962 10.962 0 0 0 1.52-3.092 4.782 4.782 0 0 1-2.92-4.4ZM22.037 12.21a4.872 4.872 0 0 0 1.115-3.49 4.957 4.957 0 0 0-3.208 1.66 4.636 4.636 0 0 0-1.143 3.36 4.1 4.1 0 0 0 3.236-1.53Z"
              />
              <path
                d="M42.302 27.14H37.57l-1.137 3.356h-2.005l4.484-12.418h2.083l4.483 12.418h-2.039Zm-4.243-1.55h3.752l-1.85-5.446h-.051Zm18.136-.015c0 3.074-1.645 5.052-4.126 5.052a3.353 3.353 0 0 1-3.107-1.729h-.04v4.9h-1.868V21.77c0-1.88.041-3.19.122-3.932h1.64l.117 1.645h.04a4.108 4.108 0 0 1 3.71-1.856c2.45 0 4.512 2.135 4.512 5.948Zm-1.923.055c0-2.45-1.267-4.062-3.214-4.062-1.891 0-3.27 1.715-3.27 4.062 0 2.398 1.403 4.087 3.236 4.087 1.978 0 3.248-1.666 3.248-4.087ZM66.18 25.63c0 3.074-1.644 5.052-4.125 5.052a3.354 3.354 0 0 1-3.108-1.729h-.04v4.9H57.04V21.77c0-1.88.04-3.19.121-3.932h1.64l.117 1.645h.04a4.108 4.108 0 0 1 3.71-1.856c2.449 0 4.511 2.135 4.511 5.948Zm-1.923.055c0-2.45-1.266-4.062-3.214-4.062-1.891 0-3.27 1.715-3.27 4.062 0 2.398 1.403 4.087 3.236 4.087 1.978 0 3.248-1.666 3.248-4.087ZM75.188 26.683c0 2.196-1.526 3.73-3.847 3.73-2.218 0-3.646-1.534-3.646-3.73 0-2.238 1.461-3.732 3.68-3.732 2.24 0 3.813 1.514 3.813 3.732Zm-5.568-.019c0 1.469.727 2.425 1.798 2.425 1.068 0 1.845-.973 1.845-2.425 0-1.468-.753-2.448-1.83-2.448-1.082 0-1.813.996-1.813 2.448ZM82.158 30.496h-1.87v-5.025c0-1.596-.613-2.347-1.847-2.347-.94 0-1.644.635-1.868 1.326a2.397 2.397 0 0 0-.105.695v5.351h-1.869V21.77c0-.81-.023-1.684-.097-2.47h1.635l.083 1.168h.048a2.783 2.783 0 0 1 2.537-1.378c1.67 0 3.352 1.212 3.352 4.093ZM89.05 30.496l-.148-.949h-.045c-.535.734-1.427 1.16-2.516 1.16-1.693 0-2.745-1.215-2.745-2.621 0-2.21 1.967-3.314 5.067-3.298v-.14c0-.636-.405-1.671-1.919-1.671a4.81 4.81 0 0 0-2.363.652l-.444-1.287c.712-.452 1.853-.79 3.127-.79 2.745 0 3.48 1.74 3.48 3.678v3.145c0 .785.033 1.557.127 2.121Zm-.29-4.238c-1.5-.026-2.985.302-2.985 1.669 0 .88.575 1.286 1.28 1.286.908 0 1.572-.579 1.782-1.212a1.66 1.66 0 0 0 .06-.46v-1.283ZM95.588 30.496l-.069-1.099h-.047a2.908 2.908 0 0 1-2.55 1.31c-1.905 0-2.947-1.388-2.947-2.908v-5.5h1.869v5.096c0 1.126.375 1.885 1.354 1.885.737 0 1.252-.512 1.45-1.008a1.47 1.47 0 0 0 .07-.492v-5.481h1.87v6.228c0 .928.02 1.69.069 2.37ZM102.158 30.496l-.068-1.148h-.048a2.932 2.932 0 0 1-2.55 1.36c-1.798 0-3.017-1.49-3.017-3.581 0-2.345 1.377-3.683 3.166-3.683a2.665 2.665 0 0 1 2.304 1.072h.032v-5.358h1.868V28.36c0 .792.02 1.536.068 2.137Zm-1.933-3.26c0-.13-.012-.302-.046-.439-.175-.733-.83-1.345-1.73-1.345-1.266 0-1.987 1.108-1.987 2.541 0 1.38.69 2.448 1.963 2.448.808 0 1.554-.539 1.754-1.39a1.75 1.75 0 0 0 .046-.452ZM42.403 10.478h3.3c1.627 0 2.736.767 2.736 2.18 0 1.489-1.189 2.344-2.905 2.344h-1.255v2.493h-1.876Zm1.876 3.146h.95c.75 0 1.188-.359 1.188-.934 0-.583-.431-.858-1.156-.858h-.982ZM49.295 17.495v-5.58h1.503l.104 1.047h.04a1.902 1.902 0 0 1 1.672-1.159 1.8 1.8 0 0 1 .44.048v1.544a2.17 2.17 0 0 0-.568-.064c-.608 0-1.156.383-1.33 1.024a2.117 2.117 0 0 0-.047.463v2.677ZM53.755 15.197c0-1.653 1.22-3.394 3.521-3.394s3.5 1.685 3.5 3.34c0 1.757-1.27 3.458-3.508 3.458-2.285 0-3.513-1.725-3.513-3.404Zm5.075-.04c0-1.06-.446-1.974-1.571-1.974-1.069 0-1.559.89-1.559 1.974 0 1.124.522 2.046 1.567 2.046 1.006 0 1.563-.906 1.563-2.046ZM61.839 11.915h1.503l.104.775h.04c.463-.536 1.132-.928 1.942-.928.759 0 1.318.311 1.644.936a2.534 2.534 0 0 1 2.005-.936c1.222 0 1.958.848 1.958 2.392v3.341h-1.829v-3.106c0-.784-.247-1.171-.822-1.171-.408 0-.767.263-1.02.703-.024.143-.04.343-.04.527v3.047h-1.82v-3.106c0-.72-.255-1.171-.822-1.171-.416 0-.775.287-1.012.752-.04.135-.055.335-.055.502v3.023h-1.829V11.915ZM72.14 15.197c0-1.653 1.219-3.394 3.52-3.394s3.5 1.685 3.5 3.34c0 1.757-1.27 3.458-3.508 3.458-2.284 0-3.512-1.725-3.512-3.404Zm5.074-.04c0-1.06-.447-1.974-1.572-1.974-1.068 0-1.558.89-1.558 1.974 0 1.124.522 2.046 1.566 2.046 1.006 0 1.564-.906 1.564-2.046ZM84.108 10.79h-2.092v-1.48h6.077v1.48h-2.1v6.704h-1.885ZM88.878 8.994h1.885v3.673h.032a2.069 2.069 0 0 1 .623-.504 2.01 2.01 0 0 1 .982-.256c1.19 0 1.966.848 1.966 2.4v3.188h-1.885V14.5c0-.72-.24-1.172-.871-1.172-.447 0-.767.256-.927.576a1.22 1.22 0 0 0-.08.47v3.12h-1.725ZM95.47 15.293c0-1.917 1.389-3.49 3.55-3.49 2.069 0 3.394 1.437 3.394 3.37 0 .232-.024.463-.04.616h-5.018c.111.896.871 1.517 1.918 1.517a3.79 3.79 0 0 0 1.637-.367l.416 1.212a4.953 4.953 0 0 1-2.3.511c-2.236 0-3.557-1.446-3.557-3.37Zm5.19-.656c-.016-.68-.407-1.405-1.502-1.405-.99 0-1.532.704-1.612 1.405Z"
              />
            </g>
          </svg>
        </a>

        <!-- Google Play Store Badge -->
        <a
          [href]="playStoreUrl"
          target="_blank"
          rel="noopener noreferrer"
          class="app-store-badges__link"
          aria-label="Get RinkLink on Google Play"
        >
          <svg
            class="app-store-badges__badge"
            viewBox="0 0 135 40"
            xmlns="http://www.w3.org/2000/svg"
            role="img"
            aria-hidden="true"
          >
            <title>Get it on Google Play</title>
            <rect width="135" height="40" rx="5" fill="#000" />
            <path
              fill="#00D4AA"
              d="M10.438 7.54c-.373.397-.593.985-.593 1.726v21.468c0 .74.22 1.33.593 1.726l.092.089 12.03-12.03v-.283L10.53 8.206Z"
            />
            <path
              fill="#FFCE00"
              d="M26.568 24.49 22.56 20.48v-.96l4.008-4.01.09.052 4.75 2.7c1.355.77 1.355 2.03 0 2.802l-4.75 2.7Z"
            />
            <path
              fill="#F34336"
              d="M26.657 24.438 22.56 20.34 10.438 32.46c.45.476 1.192.535 2.024.06l14.196-8.082"
            />
            <path
              fill="#5BC9F4"
              d="M26.657 15.562 12.461 7.48c-.832-.475-1.574-.416-2.023.06L22.56 19.66Z"
            />
            <g fill="#fff">
              <path
                d="M68.14 21.748c-2.192 0-3.98 1.666-3.98 3.963 0 2.28 1.788 3.962 3.98 3.962 2.192 0 3.98-1.682 3.98-3.962 0-2.297-1.788-3.963-3.98-3.963Zm0 6.36c-1.2 0-2.237-1.004-2.237-2.397 0-1.408 1.036-2.398 2.237-2.398 1.2 0 2.237.99 2.237 2.398 0 1.393-1.036 2.396-2.237 2.396ZM58.823 21.748c-2.193 0-3.98 1.666-3.98 3.963 0 2.28 1.787 3.962 3.98 3.962 2.192 0 3.98-1.682 3.98-3.962 0-2.297-1.788-3.963-3.98-3.963Zm0 6.36c-1.2 0-2.238-1.004-2.238-2.397 0-1.408 1.037-2.398 2.238-2.398 1.2 0 2.237.99 2.237 2.398 0 1.393-1.036 2.396-2.237 2.396ZM47.728 23.098v1.673h4.006c-.12.94-.433 1.627-.91 2.11-.585.59-1.5 1.235-3.096 1.235-2.47 0-4.398-1.99-4.398-4.472 0-2.483 1.928-4.472 4.398-4.472 1.332 0 2.306.525 3.025 1.202l1.18-1.188c-1.005-.962-2.34-1.7-4.205-1.7-3.384 0-6.226 2.76-6.226 6.158 0 3.397 2.842 6.158 6.226 6.158 1.826 0 3.2-.603 4.28-1.727 1.107-1.113 1.452-2.68 1.452-3.944 0-.391-.03-.754-.09-1.053h-5.642ZM89.387 24.398c-.332-.893-1.345-2.54-3.417-2.54-2.055 0-3.765 1.617-3.765 3.853 0 2.16 1.692 3.962 3.963 3.962 1.83 0 2.888-1.123 3.327-1.776l-1.363-.91c-.454.668-1.075 1.111-1.964 1.111-.89 0-1.525-.41-1.933-1.212l5.331-2.213-.18-.426Zm-5.438 1.337c-.044-1.527 1.183-2.307 2.065-2.307.69 0 1.272.345 1.467.84l-3.532 1.467ZM80.34 29.422h1.742V18.023H80.34ZM77.465 22.672h-.06c-.395-.474-1.15-.924-2.107-.924-2 0-3.833 1.766-3.833 4.03 0 2.25 1.833 3.996 3.833 3.996.958 0 1.712-.45 2.107-.939h.06v.594c0 1.58-.842 2.427-2.2 2.427-1.108 0-1.796-.8-2.078-1.474l-1.517.633c.456 1.108 1.667 2.47 3.595 2.47 2.088 0 3.853-1.232 3.853-4.237v-7.299h-1.653v.723Zm-2.078 5.537c-1.2 0-2.205-1.017-2.205-2.41 0-1.409 1.005-2.447 2.205-2.447 1.184 0 2.118 1.038 2.118 2.447 0 1.393-.934 2.41-2.118 2.41ZM99.204 18.023H95.13v11.399h1.74v-4.317h2.334c1.852 0 3.672-1.344 3.672-3.541 0-2.197-1.82-3.54-3.672-3.54Zm.043 5.493h-2.376v-3.906h2.376c1.25 0 1.96.938 1.96 1.953 0 .996-.71 1.953-1.96 1.953ZM110.47 21.733c-1.21 0-2.46.534-2.978 1.72l1.544.646c.316-.645.905-.856 1.523-.856.863 0 1.74.52 1.754 1.44v.116c-.302-.173-.948-.432-1.742-.432-1.597 0-3.223.88-3.223 2.523 0 1.501 1.309 2.47 2.776 2.47 1.123 0 1.742-.507 2.13-.1h.057v.842h1.68v-4.301c0-1.99-1.482-3.107-3.39-3.107h-.13Zm-.203 6.146c-.547 0-1.31-.274-1.31-.95 0-.865.948-1.196 1.768-1.196.733 0 1.077.16 1.517.374-.129 1.035-1.02 1.772-1.975 1.772ZM120.3 21.98l-1.995 5.074h-.058l-2.07-5.074h-1.873l3.103 7.082-1.77 3.942h1.813l4.784-11.024ZM104.91 29.422h1.74V18.023h-1.74ZM47.418 10.242c0 .87-.258 1.56-.773 2.073-.585.612-1.346.918-2.28.918-.898 0-1.66-.31-2.284-.932a3.134 3.134 0 0 1-.937-2.284c0-.899.312-1.667.937-2.304.624-.637 1.386-.956 2.284-.956.445 0 .87.088 1.273.264.402.176.723.412.961.706l-.54.544a1.855 1.855 0 0 0-1.694-.752c-.66 0-1.225.232-1.697.696-.471.463-.707 1.07-.707 1.822 0 .751.236 1.362.707 1.834.472.471 1.037.707 1.697.707.693 0 1.271-.237 1.732-.71.3-.307.473-.735.52-1.283h-2.252V9.54h2.987c.044.23.066.45.066.66v.042ZM52.63 7.447h-2.815v2.06h2.54v.753h-2.54v2.06h2.815v.773h-3.593V6.674h3.593zM56.416 13.093h-.778V7.447h-1.727v-.773h4.232v.773h-1.727zM61.66 13.093V6.674h.778v6.419zM66.847 13.093h-.778V7.447H64.34v-.773h4.235v.773h-1.728zM77.938 12.293c-.608.622-1.366.932-2.272.932-.907 0-1.665-.31-2.273-.932a3.133 3.133 0 0 1-.928-2.276c0-.898.31-1.664.928-2.296.608-.631 1.366-.946 2.273-.946.9 0 1.656.316 2.268.95.612.633.917 1.398.917 2.292 0 .9-.305 1.666-.913 2.276Zm-3.964-.499c.459.469 1.024.703 1.692.703.668 0 1.233-.234 1.692-.703.459-.468.689-1.077.689-1.827 0-.75-.23-1.359-.689-1.827-.459-.469-1.024-.703-1.692-.703-.668 0-1.233.234-1.692.703-.46.468-.689 1.077-.689 1.827 0 .75.23 1.359.689 1.827ZM80.135 13.093V6.674h.947l2.945 4.992h.033l-.033-1.237V6.674h.778v6.419h-.811l-3.082-5.237h-.033l.033 1.237v4h-.777Z"
              />
            </g>
          </svg>
        </a>
      </div>
    </div>
  `,
  styles: [
    `
      .app-store-badges {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.75rem;

        &__label {
          color: var(--text-color-secondary);
          font-size: 0.875rem;
          margin: 0;
        }

        &__buttons {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 0.75rem;
        }

        &__link {
          display: inline-block;
          transition: transform 0.2s ease, opacity 0.2s ease;

          &:hover {
            transform: scale(1.05);
            opacity: 0.9;
          }

          &:focus {
            outline: 2px solid var(--primary-500);
            outline-offset: 2px;
            border-radius: 6px;
          }
        }

        &__badge {
          height: 40px;
          width: auto;
        }

        &--small {
          .app-store-badges__badge {
            height: 32px;
          }

          .app-store-badges__label {
            font-size: 0.75rem;
          }
        }
      }
    `,
  ],
  changeDetection: ChangeDetectionStrategy.OnPush,
})
export class AppStoreBadgesComponent {
  /**
   * Size variant for the badges.
   * - 'default': Standard size (40px height)
   * - 'small': Smaller size (32px height)
   */
  @Input() size: 'default' | 'small' = 'default';

  /**
   * Whether to show the "Get the mobile app" label above the badges.
   */
  @Input() showLabel = false;

  /**
   * Apple App Store URL for the RinkLink app.
   * Uses a placeholder URL until the app is published.
   */
  readonly appStoreUrl = 'https://apps.apple.com/app/rinklink/id000000000';

  /**
   * Google Play Store URL for the RinkLink app.
   * Uses a placeholder URL until the app is published.
   */
  readonly playStoreUrl =
    'https://play.google.com/store/apps/details?id=com.rinklink.app';
}
